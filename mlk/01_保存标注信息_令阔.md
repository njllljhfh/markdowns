# 保存标注信息

### 一、接口详情

```
API名称： 保存标注信息
描述：保存前端一张图片的标注信息
数据格式：JSON/XML
方法：HTTP POST
是否需要用户授权：暂定
请求URL：http://（暂时没定）
```

##### 1、请求数据格式

```json
# 前提：
	前端拿到了每张图片的 { img_name:img_id } 的 Map
```

```json
# json格式规范：所有的key都用（大写字母+下划线）的格式

{
    "TASK_ID":2018062010000026348,
    "TASK_TYPE":"",						   # 任务类型，用于判断是否经过opencv处理
    "IMG_ID":2018062010000000001,		   	# 8+11位的数字，这是初始图片的id
    "IMG_NAME":"xxx.jpg",	
    "OPER_ID":2018031452354620523,		 	# 操作人ID，即用户ID，8+11位，后面加的功能
    "LAB_CLASS":[						   # 标签类，
    	{ 	
    		"ID":12,					# 标签类ID
    		"NAME":"xxx",				# 标签类名
    		"COLOR":[255,255,255],	 	 # 标签类颜色RGB，列表格式好转码
    		"ORDER_ID":1,				# 标签类序号，（可以不传，按顺序给就行）
            "INSTANCES":[
                {
                    "ORDER_ID":1,			# 实例序号，（可以不传，按顺序给就行）
                    "NAME":"XXXX",			# 实例名
                    "TYPE":"",	# 实例样式类型，包括：RECTANGLE、PATH、PEN、BRUSH、ELLIPSE 5种
                    "DATA":"",	# 实例的的具体数据，矩形类型的数据格式[x,y,w,h]，其他类型均为字符串
                    "PIXEL_SIZE":3,	# 画笔大小，数字格式，林森定的范围1-7
                    "OPER_ID":2018062010000000001,	# 操作人ID，考虑到分工协作，后添加的功能
                },

             ]
        },
    ],
}


# 1、备注（前端不用看）
# 后期要追加的字段：OPER_ID
# INSTANCES中的数据用字典格式，因为不用管顺序问题，取数据好取
# 矩形标注，检测任务不用传，小坤不用传

# 2、考虑一是否需要以下字段
图片分组；IS_RIO:[x,y,w,h]
```

```
RECTANGLE 数据格式：[x,y,w,h]

PATH 数据格式：

PEN 数据格式：

BRUSH 数据格式：
```

##### 2、响应数据格式

```json
{
    "errcode": 666666,    # 六个6，表示成功
    "errmsg": "OK"
}
```



3、更改逻辑

先调用opencv接口，再直接插入总数据



### 二、代码逻辑

分三个阶段

标注信息插入

opencv处理









