# 给指定任务下的图像随机分集合。查询 指定任务下 各个集合的 图像 信息 。



## 一、给指定任务下的图像随机分集合，更新 TaskImgRel 表 put请求 

[url]: 192.168.186.128:8000/training/tasks/sets



### 1、前端传来的数据（全部）

```json
# 三个集合的 图像的个数
{
    "task_id":"2018062212345678911",
    "training_count":7,  # 训练集中 图像 分配的个数
    "verifying_count":2,  # 验证集中 图像 分配的个数
    "testing_count":1  # 测试集中 图像 分配的个数
}
```

### 2、集合类型

```python
	0	训练          进行图像标注并输入深度学习系统，用于系统进行任务数据学习 
	1	测试          使用最终确定的模型，进行效果验证    
	2	验证          使用训练集数据训练出的中间模型，进行算法测试                             
```

### 3、返回给前端的数据

```json
# 如果三个结合都有数据返回信息格式如下
{
    "code": 0,
    "msg": "TaskImgRel 表 图像集合数据更新， 成功",
    "img_ids_set_training": [    # 训练集中 包含的 图像的img_id 的列表
        "2018070417860564001",  # img_id
        "2018070480407755750",
        "2018070452230369773",
        "2018070454850220082",
        "2018070452999377652",
        "2018070428084224055",
        "2018070455693199548"
    ],
    "img_ids_set_verifying": [    # 验证集中 包含的 图像的img_id 的列表
        "2018070456945585875",
        "2018070498638394759"
    ],
    "img_ids_set_testing": [    # 测试集中 包含的 图像的img_id 的列表
        "2018070480054362691"
    ]
}


# 如果某个 集合下没有数据返回的格式如下
{
    "code": 0,
    "msg": "TaskImgRel 表 图像集合数据更新， 成功",
    "img_ids_set_training": [
        "2018072042664015748",
        "2018072073491906663",
        "2018072090150447048",
        "2018072026260620941",
        "2018072083786495668",
        "2018072079067205144",
        "2018072085053922905",
        "2018072042031598235",
        "2018072050188367103"
    ],
    "img_ids_set_verifying": [],  # 如果某个集合下没有图像数据，则返回空列表
    "img_ids_set_testing": [
        "2018072025878381276"
    ]
}


# 若果分集中的 个数有错误，返回相应的错误码
{
    "code": 1009,
    "msg": "训练集中图像的个数不能小于等于0"
}
```



## 二、查询 指定 任务下 各 指定 合的 图像 信息，get请求

[url]: 192.168.186.128:8000/training/tasks/sets?task_id=2018062647746347080&amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;amp;set_type_id=1



### 1、前端传来的数据（全部）

```json
# set_type_id 集合类型
?task_id="2018070477207204860"&set_type_id=1
```
### 2、返回给前端的数据 

```json
# 如果该集合中存在图像数据，返回的信息如下
{
    "code": 0,
    "msg": "集合编号id=1的图像数据查询成功",
    "task_id": 2018072049434026765,
    "img_info_list": [               # 目标集合中 包含的 图像的相关信息 的列表
        {
            "img_name": "img_拓海_1.png",
            "img_id": "2018072080042233351",
            "state": 0,
            "order_id": 1
        },
        {
            "img_name": "img_1.jpg",
            "img_id": "2018072084092101478",
            "state": 0,
            "order_id": 2
        },
        {
            "img_name": "img_2.jpg",
            "img_id": "2018072067241762338",
            "state": 0,
            "order_id": 3
        }
    ]
}


# 如果该集合中 不存在图像数据，返回的信息如下
{
    "code": 错误码,
    "msg": "获取 任务id为 2018072049434026765，属于集合 2，的图像的相关数据 失败"
}
```

